"use strict";var P=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var xe=P(oe=>{"use strict";Object.defineProperty(oe,"__esModule",{value:!0});oe.binarySearch=Ye;function Ye(e,t){let r=0,i=e.length-1,s;for(;r<=i;){let l=Math.floor((r+i)/2),o=e[l];if(o<t)r=l+1;else if(o>t)i=l-1;else{r=l,i=l,s=l;break}}let a=Math.max(Math.min(r,i,e.length-1),0),f=Math.min(Math.max(r,i,0),e.length-1);return{low:a,high:f,match:s}}});var ce=P(ae=>{"use strict";Object.defineProperty(ae,"__esModule",{value:!0});ae.translateOffset=Ze;var Ee=!1;function Ze(e,t,r,i,s=i){if(!t.every((o,n)=>n===0||t[n-1]<=o)){for(let o=0;o<t.length;o++){let n=t[o],c=i[o];if(e>=n&&e<=n+c){let d=s[o],p=r[o],g=Math.min(e-n,d);return p+g}}Ee||(Ee=!0,console.warn("fromOffsets should be sorted in ascending order"))}let f=0,l=t.length-1;for(;f<=l;){let o=Math.floor((f+l)/2),n=t[o],c=i[o];if(e>=n&&e<=n+c){let d=s[o],p=r[o],g=Math.min(e-n,d);return p+g}else e<n?l=o-1:f=o+1}}});var _e=P($=>{"use strict";Object.defineProperty($,"__esModule",{value:!0});$.SourceMap=void 0;var fe=xe(),Oe=ce(),le=class{constructor(t){this.mappings=t}toSourceRange(t,r,i,s){return this.findMatchingStartEnd(t,r,i,"generatedOffsets",s)}toGeneratedRange(t,r,i,s){return this.findMatchingStartEnd(t,r,i,"sourceOffsets",s)}toSourceLocation(t,r){return this.findMatchingOffsets(t,"generatedOffsets",r)}toGeneratedLocation(t,r){return this.findMatchingOffsets(t,"sourceOffsets",r)}*findMatchingOffsets(t,r,i){let s=this.getMemoBasedOnRange(r);if(s.offsets.length===0)return;let{low:a,high:f}=(0,fe.binarySearch)(s.offsets,t),l=new Set,o=r=="sourceOffsets"?"generatedOffsets":"sourceOffsets";for(let n=a;n<=f;n++)for(let c of s.mappings[n]){if(l.has(c)||(l.add(c),i&&!i(c.data)))continue;let d=(0,Oe.translateOffset)(t,c[r],c[o],W(c,r),W(c,o));d!==void 0&&(yield[d,c])}}*findMatchingStartEnd(t,r,i,s,a){let f=s=="sourceOffsets"?"generatedOffsets":"sourceOffsets",l=[],o=!1;for(let[n,c]of this.findMatchingOffsets(t,s)){if(a&&!a(c.data))continue;l.push([n,c]);let d=(0,Oe.translateOffset)(r,c[s],c[f],W(c,s),W(c,f));d!==void 0&&(o=!0,yield[n,d,c,c])}if(!o&&i){for(let[n,c]of l)for(let[d,p]of this.findMatchingOffsets(r,s))if(!(a&&!a(p.data)||d<n)){yield[n,d,c,p];break}}}getMemoBasedOnRange(t){return t==="sourceOffsets"?this.sourceCodeOffsetsMemo??=this.createMemo("sourceOffsets"):this.generatedCodeOffsetsMemo??=this.createMemo("generatedOffsets")}createMemo(t){let r=new Set;for(let a of this.mappings)for(let f=0;f<a[t].length;f++)r.add(a[t][f]),r.add(a[t][f]+W(a,t)[f]);let i=[...r].sort((a,f)=>a-f),s=i.map(()=>new Set);for(let a of this.mappings)for(let f=0;f<a[t].length;f++){let l=(0,fe.binarySearch)(i,a[t][f]).match,o=(0,fe.binarySearch)(i,a[t][f]+W(a,t)[f]).match;for(let n=l;n<=o;n++)s[n].add(a)}return{offsets:i,mappings:s}}};$.SourceMap=le;function W(e,t){return t=="sourceOffsets"?e.lengths:e.generatedLengths??e.lengths}});var U=P(R=>{"use strict";var et=R&&R.__createBinding||(Object.create?function(e,t,r,i){i===void 0&&(i=r);var s=Object.getOwnPropertyDescriptor(t,r);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,s)}:function(e,t,r,i){i===void 0&&(i=r),e[i]=t[r]}),Ce=R&&R.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&et(t,e,r)};Object.defineProperty(R,"__esModule",{value:!0});Ce(_e(),R);Ce(ce(),R)});var Me=P(C=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0});C.isHoverEnabled=tt;C.isInlayHintsEnabled=nt;C.isCodeLensEnabled=rt;C.isSemanticTokensEnabled=it;C.isCallHierarchyEnabled=st;C.isRenameEnabled=ot;C.isDefinitionEnabled=at;C.isTypeDefinitionEnabled=ct;C.isReferencesEnabled=ft;C.isImplementationEnabled=lt;C.isHighlightEnabled=ut;C.isSymbolsEnabled=dt;C.isFoldingRangesEnabled=pt;C.isSelectionRangesEnabled=gt;C.isLinkedEditingEnabled=ht;C.isColorEnabled=mt;C.isDocumentLinkEnabled=St;C.isDiagnosticsEnabled=vt;C.isCodeActionsEnabled=bt;C.isFormattingEnabled=yt;C.isCompletionEnabled=xt;C.isAutoInsertEnabled=Et;C.isSignatureHelpEnabled=Ot;C.shouldReportDiagnostics=_t;C.resolveRenameNewName=Ct;C.resolveRenameEditText=Mt;function tt(e){return!!e.semantic}function nt(e){return!!e.semantic}function rt(e){return!!e.semantic}function it(e){return typeof e.semantic=="object"?e.semantic.shouldHighlight?.()??!0:!!e.semantic}function st(e){return!!e.navigation}function ot(e){return typeof e.navigation=="object"?e.navigation.shouldRename?.()??!0:!!e.navigation}function at(e){return!!e.navigation}function ct(e){return!!e.navigation}function ft(e){return!!e.navigation}function lt(e){return!!e.navigation}function ut(e){return!!e.navigation}function dt(e){return!!e.structure}function pt(e){return!!e.structure}function gt(e){return!!e.structure}function ht(e){return!!e.structure}function mt(e){return!!e.structure}function St(e){return!!e.structure}function vt(e){return!!e.verification}function bt(e){return!!e.verification}function yt(e){return!!e.format}function xt(e){return!!e.completion}function Et(e){return!!e.completion}function Ot(e){return!!e.completion}function _t(e){return typeof e.verification=="object"?e.verification.shouldReport?.()??!0:!!e.verification}function Ct(e,t){return typeof t.navigation=="object"?t.navigation.resolveRenameNewName?.(e)??e:e}function Mt(e,t){return typeof t.navigation=="object"?t.navigation.resolveRenameEditText?.(e)??e:e}});var de=P(X=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0});X.LinkedCodeMap=void 0;var Ft=U(),ue=class extends Ft.SourceMap{*getLinkedOffsets(t){for(let r of this.toGeneratedLocation(t))yield r[0];for(let r of this.toSourceLocation(t))yield r[0]}};X.LinkedCodeMap=ue});var we=P(Fe=>{"use strict";Object.defineProperty(Fe,"__esModule",{value:!0})});var Pe=P(J=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0});J.FileMap=void 0;var pe=class extends Map{constructor(t){super(),this.caseSensitive=t,this.originalFileNames=new Map}keys(){return this.originalFileNames.values()}get(t){return super.get(this.normalizeId(t))}has(t){return super.has(this.normalizeId(t))}set(t,r){return this.originalFileNames.set(this.normalizeId(t),t),super.set(this.normalizeId(t),r)}delete(t){return this.originalFileNames.delete(this.normalizeId(t)),super.delete(this.normalizeId(t))}clear(){return this.originalFileNames.clear(),super.clear()}normalizeId(t){return this.caseSensitive?t:t.toLowerCase()}};J.FileMap=pe});var B=P(N=>{"use strict";var wt=N&&N.__createBinding||(Object.create?function(e,t,r,i){i===void 0&&(i=r);var s=Object.getOwnPropertyDescriptor(t,r);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,s)}:function(e,t,r,i){i===void 0&&(i=r),e[i]=t[r]}),Y=N&&N.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&wt(t,e,r)};Object.defineProperty(N,"__esModule",{value:!0});N.defaultMapperFactory=N.SourceMap=void 0;N.createLanguage=Lt;N.forEachEmbeddedCode=Q;var Pt=U();Object.defineProperty(N,"SourceMap",{enumerable:!0,get:function(){return Pt.SourceMap}});Y(Me(),N);Y(de(),N);Y(we(),N);Y(Pe(),N);var Dt=U(),Nt=de(),Tt=e=>new Dt.SourceMap(e);N.defaultMapperFactory=Tt;function Lt(e,t,r){let i=new WeakMap,s=new WeakMap,a=new WeakMap,f={mapperFactory:N.defaultMapperFactory,plugins:e,scripts:{fromVirtualCode(n){return i.get(n)},get(n){r(n);let c=t.get(n);return c?.isAssociationDirty&&this.set(n,c.snapshot,c.languageId),t.get(n)},set(n,c,d,p=e){if(!d){for(let h of e)if(d=h.getLanguageId?.(n),d)break}if(!d){console.warn(`languageId not found for ${n}`);return}let g=!1;for(let h of e)if(h.isAssociatedFileOnly?.(n,d)){g=!0;break}if(t.has(n)){let h=t.get(n);if(h.languageId!==d||h.associatedOnly!==g)return this.delete(n),this.set(n,c,d);if(g)h.snapshot=c;else if(h.isAssociationDirty||h.snapshot!==c){h.snapshot=c;let u=o(h);if(h.generated){let{updateVirtualCode:m,createVirtualCode:v}=h.generated.languagePlugin,E=m?m(n,h.generated.root,c,u):v?.(n,d,c,u);if(E){h.generated.root=E,h.generated.embeddedCodes.clear();for(let x of Q(h.generated.root))i.set(x,h),h.generated.embeddedCodes.set(x.id,x);return h}else{this.delete(n);return}}l(h)}else return h}else{let h={id:n,languageId:d,snapshot:c,associatedIds:new Set,targetIds:new Set,associatedOnly:g};if(t.set(n,h),g)return h;for(let u of p){let m=u.createVirtualCode?.(n,d,c,o(h));if(m){h.generated={root:m,languagePlugin:u,embeddedCodes:new Map};for(let v of Q(m))i.set(v,h),h.generated.embeddedCodes.set(v.id,v);break}}return h}},delete(n){let c=t.get(n);c&&(c.generated?.languagePlugin.disposeVirtualCode?.(n,c.generated.root),t.delete(n),l(c))}},maps:{get(n,c){let d=s.get(n.snapshot);if(d||s.set(n.snapshot,d=new WeakMap),!d.has(c.snapshot)){let p=n.associatedScriptMappings?.get(c.id)??n.mappings;d.set(c.snapshot,f.mapperFactory(p))}return d.get(c.snapshot)},*forEach(n){let c=i.get(n);if(yield[c,this.get(n,c)],n.associatedScriptMappings)for(let[d]of n.associatedScriptMappings){let p=t.get(d);p&&(yield[p,this.get(n,p)])}}},linkedCodeMaps:{get(n){let c=i.get(n),d=a.get(n.snapshot);return d?.[0]!==c.snapshot&&a.set(n.snapshot,d=[c.snapshot,n.linkedCodeMappings?new Nt.LinkedCodeMap(n.linkedCodeMappings):void 0]),d[1]}}};return f;function l(n){n.targetIds.forEach(c=>{let d=t.get(c);d&&(d.isAssociationDirty=!0)})}function o(n){for(let c of n.associatedIds)t.get(c)?.targetIds.delete(n.id);return n.associatedIds.clear(),n.isAssociationDirty=!1,{getAssociatedScript(c){r(c);let d=t.get(c);return d&&(d.targetIds.add(n.id),n.associatedIds.add(d.id)),d}}}}function*Q(e){if(yield e,e.embeddedCodes)for(let t of e.embeddedCodes)yield*Q(t)}});var De=P(ge=>{"use strict";Object.defineProperty(ge,"__esModule",{value:!0});ge.resolveFileLanguageId=At;function At(e){switch(e.split(".").pop()){case"js":return"javascript";case"cjs":return"javascript";case"mjs":return"javascript";case"ts":return"typescript";case"cts":return"typescript";case"mts":return"typescript";case"jsx":return"javascriptreact";case"tsx":return"typescriptreact";case"json":return"json"}}});var Ne=P(he=>{"use strict";Object.defineProperty(he,"__esModule",{value:!0});he.dedupeDocumentSpans=It;function It(e){return jt(e,t=>[t.fileName,t.textSpan.start,t.textSpan.length].join(":"))}function jt(e,t){let r=new Map;for(let i of e.reverse())r.set(t(i),i);return[...r.values()]}});var Se=P(me=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0});me.getServiceScript=Rt;function Rt(e,t){let r=e.scripts.get(t);if(r?.targetIds.size)for(let i of r.targetIds){let s=e.scripts.get(i);if(s?.generated){let a=s.generated.languagePlugin.typescript?.getServiceScript(s.generated.root);if(a)return[a,s,r]}}if(r?.associatedOnly)return[void 0,r,r];if(r?.generated){let i=r.generated.languagePlugin.typescript?.getServiceScript(r.generated.root);if(i)return[i,r,r]}return[void 0,void 0,void 0]}});var He=P(T=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0});T.transformCallHierarchyItem=qt;T.transformDiagnostic=Le;T.fillSourceFileText=Ae;T.transformFileTextChanges=Gt;T.transformDocumentSpan=kt;T.transformSpan=H;T.transformTextChange=Wt;T.transformTextSpan=ee;T.toSourceOffset=Vt;T.toSourceRanges=Ie;T.toSourceOffsets=je;T.toGeneratedRanges=zt;T.toGeneratedOffset=Kt;T.toGeneratedOffsets=Re;T.getMappingOffset=I;var Ht=B(),Z=Se(),V=new WeakMap,Te=new WeakSet;function qt(e,t,r){let i=H(e,t.file,t.span,r),s=H(e,t.file,t.selectionSpan,r);return{...t,file:i?.fileName??t.file,span:i?.textSpan??{start:0,length:0},selectionSpan:s?.textSpan??{start:0,length:0}}}function Le(e,t,r,i){if(!V.has(t)){V.set(t,void 0);let{relatedInformation:s}=t;if(s&&(t.relatedInformation=s.map(a=>Le(e,a,r,i)).filter(a=>!!a)),t.file!==void 0&&t.start!==void 0&&t.length!==void 0){let[a]=(0,Z.getServiceScript)(e,t.file.fileName);if(a){let[f,l]=ee(void 0,e,a,{start:t.start,length:t.length},Ht.shouldReportDiagnostics)??[],o=f?t.file.fileName===f?t.file:r?.getSourceFile(f):void 0;l&&o&&(i&&Ae(e,t.file),V.set(t,{...t,file:o,start:l.start,length:l.length}))}else V.set(t,t)}else V.set(t,t)}return V.get(t)}function Ae(e,t){if(Te.has(t))return;Te.add(t);let[r]=(0,Z.getServiceScript)(e,t.fileName);if(r&&!r.preventLeadingOffset){let i=e.scripts.fromVirtualCode(r.code);t.text=i.snapshot.getText(0,i.snapshot.getLength())+t.text.substring(i.snapshot.getLength())}}function Gt(e,t,r){let i={},s=new Set;for(let f of t){let[l,o]=(0,Z.getServiceScript)(e,f.fileName);if(o)f.textChanges.forEach(n=>{let{fileName:c,textSpan:d}=H(e,f.fileName,n.span,r)??{};c&&d&&(i[c]??(i[c]=[])).push({...n,span:d})});else{let n=i[f.fileName]??(i[f.fileName]=[]);f.textChanges.forEach(c=>{n.push(c)}),f.isNewFile&&s.add(f.fileName)}}let a=[];for(let f in i)a.push({fileName:f,isNewFile:s.has(f),textChanges:i[f]});return a}function kt(e,t,r,i){let s=H(e,t.fileName,t.textSpan,r);if(!s&&i&&(s={fileName:t.fileName,textSpan:{start:0,length:0}}),!s)return;let a=H(e,t.fileName,t.contextSpan,r),f=H(e,t.originalFileName,t.originalTextSpan,r),l=H(e,t.originalFileName,t.originalContextSpan,r);return{...t,fileName:s.fileName,textSpan:s.textSpan,contextSpan:a?.textSpan,originalFileName:f?.fileName,originalTextSpan:f?.textSpan,originalContextSpan:l?.textSpan}}function H(e,t,r,i){if(!t||!r)return;let[s]=(0,Z.getServiceScript)(e,t);if(s){let[a,f]=ee(void 0,e,s,r,i)??[];if(f&&a)return{fileName:a,textSpan:f}}else return{fileName:t,textSpan:r}}function Wt(e,t,r,i,s){let[a,f]=ee(e,t,r,i.span,s)??[];if(f&&a)return[a,{newText:i.newText,span:f}]}function ee(e,t,r,i,s){let a=i.start,f=i.start+i.length;for(let[l,o,n]of Ie(e,t,r,a,f,s))return[l,{start:o,length:n-o}]}function Vt(e,t,r,i,s){for(let a of je(e,t,r,i,s))return a}function*Ie(e,t,r,i,s,a){if(e){let f=t.maps.get(r.code,e);for(let[l,o]of f.toSourceRange(i-I(t,r),s-I(t,r),!0,a))yield[e.id,l,o]}else for(let[f,l]of t.maps.forEach(r.code))for(let[o,n]of l.toSourceRange(i-I(t,r),s-I(t,r),!0,a))yield[f.id,o,n]}function*je(e,t,r,i,s){if(e){let a=t.maps.get(r.code,e);for(let[f,l]of a.toSourceLocation(i-I(t,r)))s(l.data)&&(yield[e.id,f])}else for(let[a,f]of t.maps.forEach(r.code))for(let[l,o]of f.toSourceLocation(i-I(t,r)))s(o.data)&&(yield[a.id,l])}function*zt(e,t,r,i,s,a){let f=e.maps.get(t.code,r);for(let[l,o]of f.toGeneratedRange(i,s,!0,a))yield[l+I(e,t),o+I(e,t)]}function Kt(e,t,r,i,s){for(let[a]of Re(e,t,r,i,s))return a}function*Re(e,t,r,i,s){let a=e.maps.get(t.code,r);for(let[f,l]of a.toGeneratedLocation(i))s(l.data)&&(yield[f+I(e,t),l])}function I(e,t){return t.preventLeadingOffset?0:e.scripts.fromVirtualCode(t.code).snapshot.getLength()}});var qe=P(ve=>{"use strict";Object.defineProperty(ve,"__esModule",{value:!0});ve.createProxyLanguageService=Bt;var S=B(),k=Ne(),b=He(),F=Se(),O=/\\/g;function Bt(e){let t=new Map,r;return{initialize(i){r=(s,a)=>{switch(a){case"getNavigationTree":return $t(i,s[a]);case"getOutliningSpans":return Ut(i,s[a]);case"getFormattingEditsForDocument":return Xt(i,s[a]);case"getFormattingEditsForRange":return Jt(i,s[a]);case"getFormattingEditsAfterKeystroke":return Qt(i,s[a]);case"getEditsForFileRename":return Yt(i,s[a]);case"getLinkedEditingRangeAtPosition":return Zt(i,s[a]);case"prepareCallHierarchy":return en(i,s[a]);case"provideCallHierarchyIncomingCalls":return tn(i,s[a]);case"provideCallHierarchyOutgoingCalls":return nn(i,s[a]);case"organizeImports":return rn(i,s[a]);case"getQuickInfoAtPosition":return sn(i,s[a]);case"getSignatureHelpItems":return on(i,s[a]);case"getDocumentHighlights":return an(i,s[a]);case"getApplicableRefactors":return cn(i,s[a]);case"getEditsForRefactor":return fn(i,s[a]);case"getRenameInfo":return ln(i,s[a]);case"getCodeFixesAtPosition":return un(i,s[a]);case"getEncodedSemanticClassifications":return dn(i,s[a]);case"getSyntacticDiagnostics":return pn(i,e,s[a]);case"getSemanticDiagnostics":return gn(i,e,s[a]);case"getSuggestionDiagnostics":return hn(i,e,s[a]);case"getDefinitionAndBoundSpan":return mn(i,s[a]);case"findReferences":return Sn(i,s[a]);case"getDefinitionAtPosition":return vn(i,s[a]);case"getTypeDefinitionAtPosition":return bn(i,s[a]);case"getImplementationAtPosition":return yn(i,s[a]);case"findRenameLocations":return xn(i,s[a]);case"getReferencesAtPosition":return En(i,s[a]);case"getCompletionsAtPosition":return On(i,s[a]);case"getCompletionEntryDetails":return _n(i,s[a]);case"provideInlayHints":return Cn(i,s[a]);case"getFileReferences":return Mn(i,s[a])}}},proxy:new Proxy(e,{get(i,s,a){if(r){t.has(s)||t.set(s,r(i,s));let f=t.get(s);if(f)return f}return Reflect.get(i,s,a)},set(i,s,a,f){return Reflect.set(i,s,a,f)}})}}function $t(e,t){return r=>{let i=r.replace(O,"/"),[s,a]=(0,F.getServiceScript)(e,i);if(s||a?.associatedOnly){let f=t(a.id);return f.childItems=void 0,f}else return t(i)}}function Ut(e,t){return r=>{let i=r.replace(O,"/"),[s,a]=(0,F.getServiceScript)(e,i);return s||a?.associatedOnly?[]:t(i)}}function Xt(e,t){return(r,i)=>{let s=r.replace(O,"/"),[a,f,l]=(0,F.getServiceScript)(e,s);return f?.associatedOnly?[]:a?e.maps.get(a.code,f).mappings.some(c=>(0,S.isFormattingEnabled)(c.data))?t(f.id,i).map(c=>(0,b.transformTextChange)(l,e,a,c,S.isFormattingEnabled)?.[1]).filter(c=>!!c):[]:t(s,i)}}function Jt(e,t){return(r,i,s,a)=>{let f=r.replace(O,"/"),[l,o,n]=(0,F.getServiceScript)(e,f);if(o?.associatedOnly)return[];if(l){let c=(0,b.toGeneratedOffset)(e,l,n,i,S.isFormattingEnabled),d=(0,b.toGeneratedOffset)(e,l,n,s,S.isFormattingEnabled);return c!==void 0&&d!==void 0?t(o.id,c,d,a).map(g=>(0,b.transformTextChange)(n,e,l,g,S.isFormattingEnabled)?.[1]).filter(g=>!!g):[]}else return t(f,i,s,a)}}function Qt(e,t){return(r,i,s,a)=>{let f=r.replace(O,"/"),[l,o,n]=(0,F.getServiceScript)(e,f);if(o?.associatedOnly)return[];if(l){let c=(0,b.toGeneratedOffset)(e,l,n,i,S.isFormattingEnabled);return c!==void 0?t(o.id,c,s,a).map(p=>(0,b.transformTextChange)(n,e,l,p,S.isFormattingEnabled)?.[1]).filter(p=>!!p):[]}else return t(f,i,s,a)}}function Yt(e,t){return(r,i,s,a)=>{let f=t(r,i,s,a);return(0,b.transformFileTextChanges)(e,f,S.isRenameEnabled)}}function Zt(e,t){return(r,i)=>{let s=r.replace(O,"/"),[a,f,l]=(0,F.getServiceScript)(e,s);if(!f?.associatedOnly)if(a){let o=(0,b.toGeneratedOffset)(e,a,l,i,S.isLinkedEditingEnabled);if(o!==void 0){let n=t(f.id,o);if(n)return{ranges:n.ranges.map(c=>(0,b.transformTextSpan)(l,e,a,c,S.isLinkedEditingEnabled)?.[1]).filter(c=>!!c),wordPattern:n.wordPattern}}}else return t(s,i)}}function en(e,t){return(r,i)=>{let s=r.replace(O,"/"),[a,f,l]=(0,F.getServiceScript)(e,s);if(!f?.associatedOnly)if(a){let o=(0,b.toGeneratedOffset)(e,a,l,i,S.isCallHierarchyEnabled);if(o!==void 0){let n=t(f.id,o);if(Array.isArray(n))return n.map(c=>(0,b.transformCallHierarchyItem)(e,c,S.isCallHierarchyEnabled));if(n)return(0,b.transformCallHierarchyItem)(e,n,S.isCallHierarchyEnabled)}}else return t(s,i)}}function tn(e,t){return(r,i)=>{let s=[],a=r.replace(O,"/"),[f,l,o]=(0,F.getServiceScript)(e,a);if(l?.associatedOnly)return[];if(f){let n=(0,b.toGeneratedOffset)(e,f,o,i,S.isCallHierarchyEnabled);n!==void 0&&(s=t(l.id,n))}else s=t(a,i);return s.map(n=>{let c=(0,b.transformCallHierarchyItem)(e,n.from,S.isCallHierarchyEnabled),d=n.fromSpans.map(p=>(0,b.transformSpan)(e,n.from.file,p,S.isCallHierarchyEnabled)?.textSpan).filter(p=>!!p);return{from:c,fromSpans:d}})}}function nn(e,t){return(r,i)=>{let s=[],a=r.replace(O,"/"),[f,l,o]=(0,F.getServiceScript)(e,a);if(l?.associatedOnly)return[];if(f){let n=(0,b.toGeneratedOffset)(e,f,o,i,S.isCallHierarchyEnabled);n!==void 0&&(s=t(l.id,n))}else s=t(a,i);return s.map(n=>{let c=(0,b.transformCallHierarchyItem)(e,n.to,S.isCallHierarchyEnabled),d=n.fromSpans.map(p=>f?(0,b.transformTextSpan)(o,e,f,p,S.isCallHierarchyEnabled)?.[1]:p).filter(p=>!!p);return{to:c,fromSpans:d}})}}function rn(e,t){return(r,i,s)=>{let a=t(r,i,s);return(0,b.transformFileTextChanges)(e,a,S.isCodeActionsEnabled)}}function sn(e,t){return(r,i)=>{let s=r.replace(O,"/"),[a,f,l]=(0,F.getServiceScript)(e,s);if(!f?.associatedOnly)if(a){let o=[];for(let[n]of(0,b.toGeneratedOffsets)(e,a,l,i,S.isHoverEnabled)){let c=t(f.id,n);if(c){let d=(0,b.transformTextSpan)(l,e,a,c.textSpan,S.isHoverEnabled)?.[1];d&&o.push({...c,textSpan:d})}}if(o.length===1)return o[0];if(o.length>=2){let n={...o[0]};n.displayParts=n.displayParts?.slice(),n.documentation=n.documentation?.slice(),n.tags=n.tags?.slice();let c=new Set([j(o[0].displayParts)]),d=new Set([j(o[0].documentation)]),p=new Set;for(let g of o[0].tags??[])p.add(g.name+"__volar__"+j(g.text));for(let g=1;g<o.length;g++){let{displayParts:h,documentation:u,tags:m}=o[g];h?.length&&!c.has(j(h))&&(c.add(j(h)),n.displayParts??=[],n.displayParts.push({...h[0],text:`

`+h[0].text}),n.displayParts.push(...h.slice(1))),u?.length&&!d.has(j(u))&&(d.add(j(u)),n.documentation??=[],n.documentation.push({...u[0],text:`

`+u[0].text}),n.documentation.push(...u.slice(1)));for(let v of m??[])p.has(v.name+"__volar__"+j(v.text))||(p.add(v.name+"__volar__"+j(v.text)),n.tags??=[],n.tags.push(v))}return n}}else return t(s,i)}}function on(e,t){return(r,i,s)=>{let a=r.replace(O,"/"),[f,l,o]=(0,F.getServiceScript)(e,a);if(!l?.associatedOnly)if(f){let n=(0,b.toGeneratedOffset)(e,f,o,i,S.isSignatureHelpEnabled);if(n!==void 0){let c=t(l.id,n,s);if(c){let d=(0,b.transformTextSpan)(o,e,f,c.applicableSpan,S.isSignatureHelpEnabled)?.[1];if(d)return{...c,applicableSpan:d}}}}else return t(a,i,s)}}function an(e,t){return(r,i,s)=>{let a=r.replace(O,"/");return q(e,a,i,S.isHighlightEnabled,(o,n)=>t(o,n,s),function*(o){for(let n of o)for(let c of n.highlightSpans)yield[c.fileName??n.fileName,c.textSpan.start]}).flat().map(o=>({...o,highlightSpans:o.highlightSpans.map(n=>{let{textSpan:c}=(0,b.transformSpan)(e,n.fileName??o.fileName,n.textSpan,S.isHighlightEnabled)??{};if(c)return{...n,contextSpan:(0,b.transformSpan)(e,n.fileName??o.fileName,n.contextSpan,S.isHighlightEnabled)?.textSpan,textSpan:c}}).filter(n=>!!n)}))}}function cn(e,t){return(r,i,s,a,f,l)=>{let o=r.replace(O,"/"),[n,c,d]=(0,F.getServiceScript)(e,o);if(c?.associatedOnly)return[];if(n){if(typeof i=="number"){let p=(0,b.toGeneratedOffset)(e,n,d,i,S.isCodeActionsEnabled);if(p!==void 0)return t(c.id,p,s,a,f,l)}else for(let[p,g]of(0,b.toGeneratedRanges)(e,n,d,i.pos,i.end,S.isCodeActionsEnabled))return t(c.id,{pos:p,end:g},s,a,f,l);return[]}else return t(o,i,s,a,f,l)}}function fn(e,t){return(r,i,s,a,f,l)=>{let o,n=r.replace(O,"/"),[c,d,p]=(0,F.getServiceScript)(e,n);if(!d?.associatedOnly){if(c)if(typeof s=="number"){let g=(0,b.toGeneratedOffset)(e,c,p,s,S.isCodeActionsEnabled);g!==void 0&&(o=t(d.id,i,g,a,f,l))}else for(let[g,h]of(0,b.toGeneratedRanges)(e,c,p,s.pos,s.end,S.isCodeActionsEnabled))o=t(d.id,i,{pos:g,end:h},a,f,l);else o=t(n,i,s,a,f,l);if(o)return o.edits=(0,b.transformFileTextChanges)(e,o.edits,S.isCodeActionsEnabled),o}}}function ln(e,t){return(r,i,s)=>{let a=r.replace(O,"/"),[f,l,o]=(0,F.getServiceScript)(e,a);if(l?.associatedOnly)return{canRename:!1,localizedErrorMessage:"Cannot rename"};if(f){let n;for(let[c]of(0,b.toGeneratedOffsets)(e,f,o,i,S.isRenameEnabled)){let d=t(l.id,c,s);if(d.canRename){let p=(0,b.transformTextSpan)(o,e,f,d.triggerSpan,S.isRenameEnabled)?.[1];if(p)return d.triggerSpan=p,d}else n=d}return n||{canRename:!1,localizedErrorMessage:"Failed to get rename locations"}}else return t(a,i,s)}}function un(e,t){return(r,i,s,a,f,l)=>{let o=[],n=r.replace(O,"/"),[c,d,p]=(0,F.getServiceScript)(e,n);if(d?.associatedOnly)return[];if(c){let g=(0,b.toGeneratedOffset)(e,c,p,i,S.isCodeActionsEnabled),h=(0,b.toGeneratedOffset)(e,c,p,s,S.isCodeActionsEnabled);g!==void 0&&h!==void 0&&(o=t(d.id,g,h,a,f,l))}else o=t(n,i,s,a,f,l);return o=o.map(g=>(g.changes=(0,b.transformFileTextChanges)(e,g.changes,S.isCodeActionsEnabled),g)),o}}function dn(e,t){return(r,i,s)=>{let a=r.replace(O,"/"),[f,l,o]=(0,F.getServiceScript)(e,a);if(l?.associatedOnly)return{spans:[],endOfLineState:0};if(f){let n,c,d=e.maps.get(f.code,l);for(let u of d.mappings)(0,S.isSemanticTokensEnabled)(u.data)&&u.sourceOffsets[0]>=i.start&&u.sourceOffsets[0]<=i.start+i.length&&(n??=u.generatedOffsets[0],c??=u.generatedOffsets[u.generatedOffsets.length-1]+(u.generatedLengths??u.lengths)[u.lengths.length-1],n=Math.min(n,u.generatedOffsets[0]),c=Math.max(c,u.generatedOffsets[u.generatedOffsets.length-1]+(u.generatedLengths??u.lengths)[u.lengths.length-1]));n??=0,c??=l.snapshot.getLength();let p=(0,b.getMappingOffset)(e,f);n+=p,c+=p;let g=t(l.id,{start:n,length:c-n},s),h=[];for(let u=0;u<g.spans.length;u+=3)for(let[m,v,E]of(0,b.toSourceRanges)(o,e,f,g.spans[u],g.spans[u]+g.spans[u+1],S.isSemanticTokensEnabled)){h.push(v,E-v,g.spans[u+2]);break}return g.spans=h,g}else return t(a,i,s)}}function pn(e,t,r){return i=>{let s=i.replace(O,"/"),[a,f,l]=(0,F.getServiceScript)(e,s);return f?.associatedOnly?[]:r(f?.id??s).map(o=>(0,b.transformDiagnostic)(e,o,t.getProgram(),!1)).filter(o=>!!o).filter(o=>!a||e.scripts.get(o.file.fileName)===l)}}function gn(e,t,r){return i=>{let s=i.replace(O,"/"),[a,f,l]=(0,F.getServiceScript)(e,s);return f?.associatedOnly?[]:r(f?.id??s).map(o=>(0,b.transformDiagnostic)(e,o,t.getProgram(),!1)).filter(o=>!!o).filter(o=>!a||!o.file||e.scripts.get(o.file.fileName)===l)}}function hn(e,t,r){return i=>{let s=i.replace(O,"/"),[a,f,l]=(0,F.getServiceScript)(e,s);return f?.associatedOnly?[]:r(f?.id??s).map(o=>(0,b.transformDiagnostic)(e,o,t.getProgram(),!1)).filter(o=>!!o).filter(o=>!a||!o.file||e.scripts.get(o.file.fileName)===l)}}function mn(e,t){return(r,i)=>{let s=r.replace(O,"/"),a=q(e,s,i,S.isDefinitionEnabled,(o,n)=>t(o,n),function*(o){for(let n of o.definitions??[])yield[n.fileName,n.textSpan.start]}),f=a.map(o=>(0,b.transformSpan)(e,s,o.textSpan,S.isDefinitionEnabled)?.textSpan).filter(o=>!!o)[0];if(!f)return;let l=a.map(o=>o.definitions?.map(n=>(0,b.transformDocumentSpan)(e,n,S.isDefinitionEnabled,n.fileName!==s)).filter(n=>!!n)??[]).flat();return{textSpan:f,definitions:(0,k.dedupeDocumentSpans)(l)}}}function Sn(e,t){return(r,i)=>{let s=r.replace(O,"/");return q(e,s,i,S.isReferencesEnabled,(l,o)=>t(l,o),function*(l){for(let o of l)for(let n of o.references)yield[n.fileName,n.textSpan.start]}).flat().map(l=>({definition:(0,b.transformDocumentSpan)(e,l.definition,S.isDefinitionEnabled,!0),references:l.references.map(n=>(0,b.transformDocumentSpan)(e,n,S.isReferencesEnabled)).filter(n=>!!n)}))}}function vn(e,t){return(r,i)=>{let s=r.replace(O,"/"),f=q(e,s,i,S.isDefinitionEnabled,(l,o)=>t(l,o),function*(l){for(let o of l)yield[o.fileName,o.textSpan.start]}).flat().map(l=>(0,b.transformDocumentSpan)(e,l,S.isDefinitionEnabled,l.fileName!==s)).filter(l=>!!l);return(0,k.dedupeDocumentSpans)(f)}}function bn(e,t){return(r,i)=>{let s=r.replace(O,"/"),f=q(e,s,i,S.isTypeDefinitionEnabled,(l,o)=>t(l,o),function*(l){for(let o of l)yield[o.fileName,o.textSpan.start]}).flat().map(l=>(0,b.transformDocumentSpan)(e,l,S.isTypeDefinitionEnabled)).filter(l=>!!l);return(0,k.dedupeDocumentSpans)(f)}}function yn(e,t){return(r,i)=>{let s=r.replace(O,"/"),f=q(e,s,i,S.isImplementationEnabled,(l,o)=>t(l,o),function*(l){for(let o of l)yield[o.fileName,o.textSpan.start]}).flat().map(l=>(0,b.transformDocumentSpan)(e,l,S.isImplementationEnabled)).filter(l=>!!l);return(0,k.dedupeDocumentSpans)(f)}}function xn(e,t){return(r,i,s,a,f)=>{let l=r.replace(O,"/"),n=q(e,l,i,S.isRenameEnabled,(c,d)=>t(c,d,s,a,f),function*(c){for(let d of c)yield[d.fileName,d.textSpan.start]}).flat().map(c=>(0,b.transformDocumentSpan)(e,c,S.isRenameEnabled)).filter(c=>!!c);return(0,k.dedupeDocumentSpans)(n)}}function En(e,t){return(r,i)=>{let s=r.replace(O,"/"),f=q(e,s,i,S.isReferencesEnabled,(l,o)=>t(l,o),function*(l){for(let o of l)yield[o.fileName,o.textSpan.start]}).flat().map(l=>(0,b.transformDocumentSpan)(e,l,S.isReferencesEnabled)).filter(l=>!!l);return(0,k.dedupeDocumentSpans)(f)}}function On(e,t){return(r,i,s,a)=>{let f=r.replace(O,"/"),[l,o,n]=(0,F.getServiceScript)(e,f);if(!o?.associatedOnly)if(l){let c=[];for(let[d,p]of(0,b.toGeneratedOffsets)(e,l,n,i,S.isCompletionEnabled)){let g=t(o.id,d,s,a);if(!g)continue;typeof p.data.completion=="object"&&p.data.completion.onlyImport&&(g.entries=g.entries.filter(u=>!!u.sourceDisplay));for(let u of g.entries)u.replacementSpan=u.replacementSpan&&(0,b.transformTextSpan)(n,e,l,u.replacementSpan,S.isCompletionEnabled)?.[1];g.optionalReplacementSpan=g.optionalReplacementSpan&&(0,b.transformTextSpan)(n,e,l,g.optionalReplacementSpan,S.isCompletionEnabled)?.[1],typeof p.data.completion=="object"&&p.data.completion.isAdditional?c.push(g):c.unshift(g)}if(c.length)return{...c[0],entries:c.map(d=>d.entries).flat()}}else return t(f,i,s,a)}}function _n(e,t){return(r,i,s,a,f,l,o)=>{let n,c=r.replace(O,"/"),[d,p,g]=(0,F.getServiceScript)(e,c);if(!p?.associatedOnly){if(d){let h=(0,b.toGeneratedOffset)(e,d,g,i,S.isCompletionEnabled);h!==void 0&&(n=t(p.id,h,s,a,f,l,o))}else return t(c,i,s,a,f,l,o);if(n?.codeActions)for(let h of n.codeActions)h.changes=(0,b.transformFileTextChanges)(e,h.changes,S.isCompletionEnabled);return n}}}function Cn(e,t){return(r,i,s)=>{let a=r.replace(O,"/"),[f,l,o]=(0,F.getServiceScript)(e,a);if(l?.associatedOnly)return[];if(f){let n,c,d=e.maps.get(f.code,l);for(let u of d.mappings)(0,S.isInlayHintsEnabled)(u.data)&&u.sourceOffsets[0]>=i.start&&u.sourceOffsets[0]<=i.start+i.length&&(n??=u.generatedOffsets[0],c??=u.generatedOffsets[u.generatedOffsets.length-1],n=Math.min(n,u.generatedOffsets[0]),c=Math.max(c,u.generatedOffsets[u.generatedOffsets.length-1]));(n===void 0||c===void 0)&&(n=0,c=0);let p=(0,b.getMappingOffset)(e,f);n+=p,c+=p;let g=t(l.id,{start:n,length:c-n},s),h=[];for(let u of g){let m=(0,b.toSourceOffset)(o,e,f,u.position,S.isInlayHintsEnabled);m!==void 0&&h.push({...u,position:m[1]})}return h}else return t(a,i,s)}}function Mn(e,t){return r=>{let i=r.replace(O,"/"),a=t(i).map(f=>(0,b.transformDocumentSpan)(e,f,S.isReferencesEnabled)).filter(f=>!!f);return(0,k.dedupeDocumentSpans)(a)}}function q(e,t,r,i,s,a){let f=[],l=new Set,[o,n,c]=(0,F.getServiceScript)(e,t);if(o)for(let[p]of(0,b.toGeneratedOffsets)(e,o,c,r,i))d(n.id,p);else d(t,r);return f;function d(p,g){if(l.has(p+":"+g))return;l.add(p+":"+g);let h=s(p,g);if(h){f.push(h);for(let u of a(h)){l.add(u[0]+":"+u[1]);let[m]=(0,F.getServiceScript)(e,u[0]);if(!m)continue;let v=e.linkedCodeMaps.get(m.code);if(!v)continue;let E=(0,b.getMappingOffset)(e,m);for(let x of v.getLinkedOffsets(u[1]-E))d(u[0],x+E)}}}}function j(e){return e?e.map(t=>t.text).join(""):""}});var Ge=P(be=>{"use strict";Object.defineProperty(be,"__esModule",{value:!0});be.createResolveModuleName=Fn;function Fn(e,t,r,i,s){let a=new Map,f={readFile:r.readFile.bind(r),directoryExists:r.directoryExists?.bind(r),realpath:r.realpath?.bind(r),getCurrentDirectory:r.getCurrentDirectory?.bind(r),getDirectories:r.getDirectories?.bind(r),useCaseSensitiveFileNames:typeof r.useCaseSensitiveFileNames=="function"?r.useCaseSensitiveFileNames.bind(r):r.useCaseSensitiveFileNames,fileExists(o){for(let{typescript:n}of i)if(n){for(let{extension:c}of n.extraFileExtensions)if(o.endsWith(`.d.${c}.ts`)){let d=o.slice(0,-`.d.${c}.ts`.length)+`.${c}`;if(l(d)){let p=s(d);if(p?.generated){let g=p.generated.languagePlugin.typescript?.getServiceScript(p.generated.root);if(g){let h=d+".d.ts";return(g.extension===".js"||g.extension===".jsx")&&l(h)?a.set(o,{sourceFileName:h,extension:".ts"}):a.set(o,{sourceFileName:d,extension:g.extension}),!0}}}}if(n.resolveHiddenExtensions&&o.endsWith(".d.ts"))for(let{extension:c}of n.extraFileExtensions){let d=o.slice(0,-5)+`.${c}`;if(l(d)){let p=s(d);if(p?.generated){let g=p.generated.languagePlugin.typescript?.getServiceScript(p.generated.root);if(g)return a.set(o,{sourceFileName:d,extension:g.extension}),!0}}}}return r.fileExists(o)}};return(o,n,c,d,p,g)=>{let h=e.resolveModuleName(o,n,c,f,d,p,g);if(h.resolvedModule){let u=a.get(h.resolvedModule.resolvedFileName);u&&(h.resolvedModule.resolvedFileName=u.sourceFileName,h.resolvedModule.extension=u.extension)}return a.clear(),h};function l(o){return r.fileExists(o)?(t?.(o)??r.readFile(o)?.length??0)<4*1024*1024:!1}}});var ke=P(te=>{"use strict";Object.defineProperty(te,"__esModule",{value:!0});te.decorateLanguageServiceHost=Pn;te.searchExternalFiles=Dn;var wn=Ge();function Pn(e,t,r){let i=t.plugins.map(p=>p.typescript?.extraFileExtensions.map(g=>"."+g.extension)??[]).flat(),s=new Map,a=new Set,f=r.readDirectory?.bind(r),l=r.resolveModuleNameLiterals?.bind(r),o=r.resolveModuleNames?.bind(r),n=r.getScriptSnapshot.bind(r),c=r.getScriptKind?.bind(r);if(f&&(r.readDirectory=(p,g,h,u,m)=>{if(g)for(let v of i)g.includes(v)||(g=[...g,v]);return f(p,g,h,u,m)}),i.length){let p=(0,wn.createResolveModuleName)(e,e.sys.getFileSize,r,t.plugins,u=>t.scripts.get(u)),g=r.useCaseSensitiveFileNames?.()?u=>u:u=>u.toLowerCase(),h=e.createModuleResolutionCache(r.getCurrentDirectory(),g,r.getCompilationSettings());l&&(r.resolveModuleNameLiterals=(u,m,v,E,...x)=>u.every(_=>!i.some(y=>_.text.endsWith(y)))?l(u,m,v,E,...x):u.map(_=>p(_.text,m,E,h,v))),o&&(r.resolveModuleNames=(u,m,v,E,x,_)=>u.every(y=>!i.some(D=>y.endsWith(D)))?o(u,m,v,E,x,_):u.map(y=>p(y,m,x,h,E).resolvedModule))}r.getScriptSnapshot=p=>{let g=d(p);return g?g.snapshot:n(p)},c&&(r.getScriptKind=p=>{let g=d(p);return g?g.scriptKind:c(p)});function d(p){if(a.has(p))return;let g;try{g=r.getScriptVersion(p)}catch{a.add(p)}if(g===void 0)return;let h=s.get(p);if(!h||h[0]!==g){h=[g];let u=t.scripts.get(p);if(u?.generated){let m=u.generated.languagePlugin.typescript?.getServiceScript(u.generated.root);if(m)if(m.preventLeadingOffset)h[1]={extension:m.extension,scriptKind:m.scriptKind,snapshot:m.code.snapshot};else{let E=u.snapshot.getText(0,u.snapshot.getLength()).split(`
`).map(x=>" ".repeat(x.length)).join(`
`)+m.code.snapshot.getText(0,m.code.snapshot.getLength());h[1]={extension:m.extension,scriptKind:m.scriptKind,snapshot:e.ScriptSnapshot.fromString(E)}}u.generated.languagePlugin.typescript?.getExtraServiceScripts&&console.warn("getExtraServiceScripts() is not available in TS plugin.")}s.set(p,h)}return h[1]}}function Dn(e,t,r){if(t.projectKind!==e.server.ProjectKind.Configured)return[];let i=t.getProjectName(),s=e.readJsonConfigFile(i,t.readFile.bind(t)),a={useCaseSensitiveFileNames:t.useCaseSensitiveFileNames(),fileExists:t.fileExists.bind(t),readFile:t.readFile.bind(t),readDirectory:(...l)=>(l[1]=r,t.readDirectory(...l))};return e.parseJsonSourceFileConfigFileContent(s,a,t.getCurrentDirectory()).fileNames}});var ze=P(w=>{"use strict";Object.defineProperty(w,"__esModule",{value:!0});w.decoratedLanguageServiceHosts=w.decoratedLanguageServices=w.projectExternalFileExtensions=w.externalFiles=void 0;w.createLanguageServicePlugin=Ln;w.arrayItemsEqual=Ve;var ye=B(),Nn=De(),Tn=qe(),We=ke();w.externalFiles=new WeakMap;w.projectExternalFileExtensions=new WeakMap;w.decoratedLanguageServices=new WeakSet;w.decoratedLanguageServiceHosts=new WeakSet;function Ln(e){return t=>{let{typescript:r}=t;return{create(s){if(!w.decoratedLanguageServices.has(s.languageService)&&!w.decoratedLanguageServiceHosts.has(s.languageServiceHost)){w.decoratedLanguageServices.add(s.languageService),w.decoratedLanguageServiceHosts.add(s.languageServiceHost);let{languagePlugins:a,setup:f}=e(r,s),l=a.map(h=>h.typescript?.extraFileExtensions.map(u=>"."+u.extension)??[]).flat();w.projectExternalFileExtensions.set(s.project,l);let o=s.languageServiceHost.getScriptSnapshot.bind(s.languageServiceHost),n=s.languageServiceHost.getScriptVersion.bind(s.languageServiceHost),c=new ye.FileMap(r.sys.useCaseSensitiveFileNames),d=(0,ye.createLanguage)([...a,{getLanguageId:Nn.resolveFileLanguageId}],new ye.FileMap(r.sys.useCaseSensitiveFileNames),h=>{let u=n(h);if(c.get(h)===u)return;c.set(h,u);let m=o(h);m?d.scripts.set(h,m):d.scripts.delete(h)}),{proxy:p,initialize:g}=(0,Tn.createProxyLanguageService)(s.languageService);s.languageService=p,g(d),(0,We.decorateLanguageServiceHost)(r,d,s.languageServiceHost),f?.(d)}return s.languageService},getExternalFiles(s,a=0){if(a>=1||!w.externalFiles.has(s)){let f=w.externalFiles.get(s),l=w.projectExternalFileExtensions.get(s),o=l?.length?(0,We.searchExternalFiles)(r,s,l):[];w.externalFiles.set(s,o),f&&!Ve(f,o)&&s.refreshDiagnostics()}return w.externalFiles.get(s)}}}}function Ve(e,t){if(e.length!==t.length)return!1;let r=new Set(e);for(let i of t)if(!r.has(i))return!1;return!0}});var Be=P((ne,Ke)=>{(function(e,t){typeof ne=="object"&&typeof Ke<"u"?t(ne):typeof define=="function"&&define.amd?define(["exports"],t):(e=typeof globalThis<"u"?globalThis:e||self,t(e.sourcemapCodec={}))})(ne,function(e){"use strict";let t=",".charCodeAt(0),r=";".charCodeAt(0),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=new Uint8Array(64),a=new Uint8Array(128);for(let u=0;u<i.length;u++){let m=i.charCodeAt(u);s[u]=m,a[m]=u}let f=typeof TextDecoder<"u"?new TextDecoder:typeof Buffer<"u"?{decode(u){return Buffer.from(u.buffer,u.byteOffset,u.byteLength).toString()}}:{decode(u){let m="";for(let v=0;v<u.length;v++)m+=String.fromCharCode(u[v]);return m}};function l(u){let m=new Int32Array(5),v=[],E=0;do{let x=o(u,E),_=[],y=!0,D=0;m[0]=0;for(let M=E;M<x;M++){let L;M=n(u,M,m,0);let A=m[0];A<D&&(y=!1),D=A,c(u,M,x)?(M=n(u,M,m,1),M=n(u,M,m,2),M=n(u,M,m,3),c(u,M,x)?(M=n(u,M,m,4),L=[A,m[1],m[2],m[3],m[4]]):L=[A,m[1],m[2],m[3]]):L=[A],_.push(L)}y||d(_),v.push(_),E=x+1}while(E<=u.length);return v}function o(u,m){let v=u.indexOf(";",m);return v===-1?u.length:v}function n(u,m,v,E){let x=0,_=0,y=0;do{let M=u.charCodeAt(m++);y=a[M],x|=(y&31)<<_,_+=5}while(y&32);let D=x&1;return x>>>=1,D&&(x=-2147483648|-x),v[E]+=x,m}function c(u,m,v){return m>=v?!1:u.charCodeAt(m)!==t}function d(u){u.sort(p)}function p(u,m){return u[0]-m[0]}function g(u){let m=new Int32Array(5),v=1024*16,E=v-36,x=new Uint8Array(v),_=x.subarray(0,E),y=0,D="";for(let M=0;M<u.length;M++){let L=u[M];if(M>0&&(y===v&&(D+=f.decode(x),y=0),x[y++]=r),L.length!==0){m[0]=0;for(let A=0;A<L.length;A++){let G=L[A];y>E&&(D+=f.decode(_),x.copyWithin(0,E,y),y-=E),A>0&&(x[y++]=t),y=h(x,y,m,G,0),G.length!==1&&(y=h(x,y,m,G,1),y=h(x,y,m,G,2),y=h(x,y,m,G,3),G.length!==4&&(y=h(x,y,m,G,4)))}}}return D+f.decode(x.subarray(0,y))}function h(u,m,v,E,x){let _=E[x],y=_-v[x];v[x]=_,y=y<0?-y<<1|1:y<<1;do{let D=y&31;y>>>=5,y>0&&(D|=32),u[m++]=s[D]}while(y>0);return m}e.decode=l,e.encode=g,Object.defineProperty(e,"__esModule",{value:!0})})});var $e=P((ie,re)=>{var An=ie&&ie.__spreadArray||function(e,t,r){if(r||arguments.length===2)for(var i=0,s=t.length,a;i<s;i++)(a||!(i in t))&&(a||(a=Array.prototype.slice.call(t,0,i)),a[i]=t[i]);return e.concat(a||Array.prototype.slice.call(t))};(function(e){if(typeof re=="object"&&typeof re.exports=="object"){var t=e(require,ie);t!==void 0&&(re.exports=t)}else typeof define=="function"&&define.amd&&define(["require","exports"],e)})(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextDocument=void 0;var r=function(){function o(n,c,d,p){this._uri=n,this._languageId=c,this._version=d,this._content=p,this._lineOffsets=void 0}return Object.defineProperty(o.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),o.prototype.getText=function(n){if(n){var c=this.offsetAt(n.start),d=this.offsetAt(n.end);return this._content.substring(c,d)}return this._content},o.prototype.update=function(n,c){for(var d=0,p=n;d<p.length;d++){var g=p[d];if(o.isIncremental(g)){var h=f(g.range),u=this.offsetAt(h.start),m=this.offsetAt(h.end);this._content=this._content.substring(0,u)+g.text+this._content.substring(m,this._content.length);var v=Math.max(h.start.line,0),E=Math.max(h.end.line,0),x=this._lineOffsets,_=a(g.text,!1,u);if(E-v===_.length)for(var y=0,D=_.length;y<D;y++)x[y+v+1]=_[y];else _.length<1e4?x.splice.apply(x,An([v+1,E-v],_,!1)):this._lineOffsets=x=x.slice(0,v+1).concat(_,x.slice(E+1));var M=g.text.length-(m-u);if(M!==0)for(var y=v+1+_.length,D=x.length;y<D;y++)x[y]=x[y]+M}else if(o.isFull(g))this._content=g.text,this._lineOffsets=void 0;else throw new Error("Unknown change event received")}this._version=c},o.prototype.getLineOffsets=function(){return this._lineOffsets===void 0&&(this._lineOffsets=a(this._content,!0)),this._lineOffsets},o.prototype.positionAt=function(n){n=Math.max(Math.min(n,this._content.length),0);var c=this.getLineOffsets(),d=0,p=c.length;if(p===0)return{line:0,character:n};for(;d<p;){var g=Math.floor((d+p)/2);c[g]>n?p=g:d=g+1}var h=d-1;return{line:h,character:n-c[h]}},o.prototype.offsetAt=function(n){var c=this.getLineOffsets();if(n.line>=c.length)return this._content.length;if(n.line<0)return 0;var d=c[n.line],p=n.line+1<c.length?c[n.line+1]:this._content.length;return Math.max(Math.min(d+n.character,p),d)},Object.defineProperty(o.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),o.isIncremental=function(n){var c=n;return c!=null&&typeof c.text=="string"&&c.range!==void 0&&(c.rangeLength===void 0||typeof c.rangeLength=="number")},o.isFull=function(n){var c=n;return c!=null&&typeof c.text=="string"&&c.range===void 0&&c.rangeLength===void 0},o}(),i;(function(o){function n(p,g,h,u){return new r(p,g,h,u)}o.create=n;function c(p,g,h){if(p instanceof r)return p.update(g,h),p;throw new Error("TextDocument.update: document must be created by TextDocument.create")}o.update=c;function d(p,g){for(var h=p.getText(),u=s(g.map(l),function(D,M){var L=D.range.start.line-M.range.start.line;return L===0?D.range.start.character-M.range.start.character:L}),m=0,v=[],E=0,x=u;E<x.length;E++){var _=x[E],y=p.offsetAt(_.range.start);if(y<m)throw new Error("Overlapping edit");y>m&&v.push(h.substring(m,y)),_.newText.length&&v.push(_.newText),m=p.offsetAt(_.range.end)}return v.push(h.substr(m)),v.join("")}o.applyEdits=d})(i||(t.TextDocument=i={}));function s(o,n){if(o.length<=1)return o;var c=o.length/2|0,d=o.slice(0,c),p=o.slice(c);s(d,n),s(p,n);for(var g=0,h=0,u=0;g<d.length&&h<p.length;){var m=n(d[g],p[h]);m<=0?o[u++]=d[g++]:o[u++]=p[h++]}for(;g<d.length;)o[u++]=d[g++];for(;h<p.length;)o[u++]=p[h++];return o}function a(o,n,c){c===void 0&&(c=0);for(var d=n?[c]:[],p=0;p<o.length;p++){var g=o.charCodeAt(p);(g===13||g===10)&&(g===13&&p+1<o.length&&o.charCodeAt(p+1)===10&&p++,d.push(c+p+1))}return d}function f(o){var n=o.start,c=o.end;return n.line>c.line||n.line===c.line&&n.character>c.character?{start:c,end:n}:o}function l(o){var n=f(o.range);return n!==o.range?{newText:o.newText,range:n}:o}})});var Je=P(z=>{"use strict";var In=z&&z.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(z,"__esModule",{value:!0});z.astro2tsx=void 0;var Ue=In(require("node:path")),jn=require("@astrojs/compiler/sync"),Rn=Be(),Xe=$e();function Hn(e,t){try{return(0,jn.convertToTSX)(e,{filename:t.filename})}catch(r){return console.error(`There was an error transforming ${t.filename} to TSX. An empty file will be returned instead. Please create an issue: https://github.com/withastro/language-tools/issues
Error: ${r}.`),{code:"",map:{file:t.filename??"",sources:[],sourcesContent:[],names:[],mappings:"",version:0},diagnostics:[{code:1e3,location:{file:t.filename,line:1,column:1,length:e.length},severity:1,text:"The Astro compiler encountered an unknown error while parsing this file. Please create an issue with your code and the error shown in the server's logs: https://github.com/withastro/language-tools/issues"}],metaRanges:{frontmatter:{start:0,end:0},body:{start:0,end:0}}}}}function qn(e,t){let r=Hn(e,{filename:t});return{virtualFile:Gn(e,r,t),diagnostics:r.diagnostics}}z.astro2tsx=qn;function Gn(e,t,r){t.code=kn(t.code,r);let i=(0,Rn.decode)(t.map.mappings),s=Xe.TextDocument.create(r,"astro",0,e),a=Xe.TextDocument.create(r+".tsx","typescriptreact",0,t.code),f=[],l;for(let o=0;o<i.length;o++)for(let n of i[o]){let c=n[0],d=a.offsetAt({line:o,character:c});if(l){let p=d-l.genOffset,g=e.substring(l.sourceOffset,l.sourceOffset+p),h=t.code.substring(l.genOffset,l.genOffset+p);if(g!==h){p=0;for(let u=0;u<d-l.genOffset&&g[u]===h[u];u++)p=u+1}if(p>0){let u=f.length?f[f.length-1]:void 0;u&&u.generatedOffsets[0]+u.lengths[0]===l.genOffset&&u.sourceOffsets[0]+u.lengths[0]===l.sourceOffset?u.lengths[0]+=p:f.push({sourceOffsets:[l.sourceOffset],generatedOffsets:[l.genOffset],lengths:[p],data:{verification:!0,completion:!0,semantic:!0,navigation:!0,structure:!0,format:!1}})}l=void 0}if(n[2]!==void 0&&n[3]!==void 0){let p=s.offsetAt({line:n[2],character:n[3]});l={genOffset:d,sourceOffset:p}}}return{id:"tsx",languageId:"typescriptreact",snapshot:{getText:(o,n)=>t.code.substring(o,n),getLength:()=>t.code.length,getChangeRange:()=>{}},mappings:f,embeddedCodes:[]}}function kn(e,t){let r=Ue.default.basename(t,Ue.default.extname(t)),i=r.startsWith("[")&&r.endsWith("]");return e.replace(/\b(\S*)__AstroComponent_/gm,(s,a)=>a?i?`_${a}_`:a[0].toUpperCase()+a.slice(1):r==="404"?"FourOhFour":s)}});var Qe=P(K=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0});K.AstroVirtualCode=K.getLanguagePlugin=void 0;var Wn=B(),Vn=Je();function zn(){return{getLanguageId(e){if(e.endsWith(".astro"))return"astro"},createVirtualCode(e,t,r){if(t==="astro")return new se(e,r)},typescript:{extraFileExtensions:[{extension:"astro",isMixedContent:!0,scriptKind:7}],getServiceScript(e){for(let t of(0,Wn.forEachEmbeddedCode)(e))if(t.id==="tsx")return{code:t,extension:".tsx",scriptKind:4}}}}}K.getLanguagePlugin=zn;var se=class{constructor(t,r){this.fileName=t,this.snapshot=r,this.id="root",this.languageId="astro",this.codegenStacks=[],this.mappings=[{sourceOffsets:[0],generatedOffsets:[0],lengths:[this.snapshot.getLength()],data:{verification:!0,completion:!0,semantic:!0,navigation:!0,structure:!0,format:!1}}],this.embeddedCodes=[];let i=(0,Vn.astro2tsx)(this.snapshot.getText(0,this.snapshot.getLength()),this.fileName);this.embeddedCodes.push(i.virtualFile)}};K.AstroVirtualCode=se});var Kn=ze(),Bn=Qe();module.exports=(0,Kn.createLanguageServicePlugin)(()=>({languagePlugins:[(0,Bn.getLanguagePlugin)()]}));
