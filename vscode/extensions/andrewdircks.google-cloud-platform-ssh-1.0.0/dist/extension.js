module.exports=(()=>{"use strict";var t={439:function(t,e,n){var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,s){function r(t){try{u(i.next(t))}catch(t){s(t)}}function c(t){try{u(i.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,c)}u((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.Connect=void 0;const o=n(549);e.Connect=function(t){return i(this,void 0,void 0,(function*(){const t="Connect to a GCP instance";function e(){return new Promise(((t,e)=>{}))}function n(t){return i(this,void 0,void 0,(function*(){return yield new Promise((t=>setTimeout(t,1e3))),"vscode"===t?"Name not unique":void 0}))}const s=o.window.createTerminal(),c=yield function(){return i(this,void 0,void 0,(function*(){const o={};return yield r.run((r=>function(o,r){return i(this,void 0,void 0,(function*(){return r.name=yield o.showInputBox({title:t,step:1,totalSteps:4,value:"",prompt:"Enter the GCP project-name",validate:n,shouldResume:e}),s.sendText(`gcloud config set project ${r.name}`),o=>function(o,s){return i(this,void 0,void 0,(function*(){return s.username=yield o.showInputBox({title:t,step:2,totalSteps:4,value:"",prompt:"Enter the SSH key username",validate:n,shouldResume:e}),o=>function(o,s){return i(this,void 0,void 0,(function*(){return s.ip=yield o.showInputBox({title:t,step:3,totalSteps:4,value:"",prompt:"Enter the IP address of the GCP compute instance",validate:n,shouldResume:e}),o=>function(o,s){return i(this,void 0,void 0,(function*(){s.key_name=yield o.showInputBox({title:t,step:4,totalSteps:4,value:s.name||"",prompt:"Customized key name (GCP project-name by default)",validate:n,shouldResume:e})}))}(o,s)}))}(o,s)}))}(o,r)}))}(r,o))),o}))}(),u=o.workspace.getConfiguration().get("SSH Key Directory");o.window.showInformationMessage(`Making GCP connection with SSH key '${c.key_name}'`),s.show(),s.sendText("rm -f -r gcp-vscode-ssh/"),s.sendText("git clone https://github.com/andrewdircks/gcp-vscode-ssh.git"),s.sendText(`bash gcp-vscode-ssh/script.sh ${u} ${c.name} ${c.key_name} ${c.username} ${c.ip}`)}))};class s{}s.back=new s,s.cancel=new s,s.resume=new s;class r{constructor(){this.steps=[]}static run(t){return i(this,void 0,void 0,(function*(){return(new r).stepThrough(t)}))}stepThrough(t){return i(this,void 0,void 0,(function*(){let e=t;for(;e;){this.steps.push(e),this.current&&(this.current.enabled=!1,this.current.busy=!0);try{e=yield e(this)}catch(t){if(t===s.back)this.steps.pop(),e=this.steps.pop();else if(t===s.resume)e=this.steps.pop();else{if(t!==s.cancel)throw t;e=void 0}}}this.current&&this.current.dispose()}))}showQuickPick({title:t,step:e,totalSteps:n,items:r,activeItem:c,placeholder:u,buttons:a,shouldResume:d}){return i(this,void 0,void 0,(function*(){const h=[];try{return yield new Promise(((l,p)=>{const v=o.window.createQuickPick();v.title=t,v.step=e,v.totalSteps=n,v.placeholder=u,v.items=r,c&&(v.activeItems=[c]),v.buttons=[...this.steps.length>1?[o.QuickInputButtons.Back]:[],...a||[]],h.push(v.onDidTriggerButton((t=>{t===o.QuickInputButtons.Back?p(s.back):l(t)})),v.onDidChangeSelection((t=>l(t[0]))),v.onDidHide((()=>{(()=>i(this,void 0,void 0,(function*(){p(d&&(yield d())?s.resume:s.cancel)})))().catch(p)}))),this.current&&this.current.dispose(),this.current=v,this.current.show()}))}finally{h.forEach((t=>t.dispose()))}}))}showInputBox({title:t,step:e,totalSteps:n,value:r,prompt:c,validate:u,buttons:a,shouldResume:d}){return i(this,void 0,void 0,(function*(){const h=[];try{return yield new Promise(((l,p)=>{const v=o.window.createInputBox();v.title=t,v.step=e,v.totalSteps=n,v.value=r||"",v.prompt=c,v.buttons=[...this.steps.length>1?[o.QuickInputButtons.Back]:[],...a||[]];let f=u("");h.push(v.onDidTriggerButton((t=>{t===o.QuickInputButtons.Back?p(s.back):l(t)})),v.onDidAccept((()=>i(this,void 0,void 0,(function*(){const t=v.value;(yield u(t))||l(t),v.enabled=!0,v.busy=!1})))),v.onDidChangeValue((t=>i(this,void 0,void 0,(function*(){const e=u(t);f=e;const n=yield e;e===f&&(v.validationMessage=n)})))),v.onDidHide((()=>{(()=>i(this,void 0,void 0,(function*(){p(d&&(yield d())?s.resume:s.cancel)})))().catch(p)}))),this.current&&this.current.dispose(),this.current=v,this.current.show()}))}finally{h.forEach((t=>t.dispose()))}}))}}},191:function(t,e,n){var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,s){function r(t){try{u(i.next(t))}catch(t){s(t)}}function c(t){try{u(i.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,c)}u((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.ChangeSSHDirectory=void 0;const o=n(549);e.ChangeSSHDirectory=function(t){return i(this,void 0,void 0,(function*(){function t(){return new Promise(((t,e)=>{}))}function e(t){return i(this,void 0,void 0,(function*(){return yield new Promise((t=>setTimeout(t,1e3))),"vscode"===t?"Name not unique":void 0}))}const n=function(t){if("/"==t.slice(-1)){const e=t.length;return t.substring(0,e-1)}return t}((yield function(){return i(this,void 0,void 0,(function*(){const n={};return yield r.run((o=>function(n,o){return i(this,void 0,void 0,(function*(){o.dir=yield n.showInputBox({title:"Change SSH Directory",step:1,totalSteps:1,value:"~/.ssh",prompt:"Enter the SSH key directory path",validate:e,shouldResume:t})}))}(o,n))),n}))}()).dir);o.window.showInformationMessage(`Changing location of SSH keys to '${n}'`),yield o.workspace.getConfiguration().update("SSH Key Directory",n)}))};class s{}s.back=new s,s.cancel=new s,s.resume=new s;class r{constructor(){this.steps=[]}static run(t){return i(this,void 0,void 0,(function*(){return(new r).stepThrough(t)}))}stepThrough(t){return i(this,void 0,void 0,(function*(){let e=t;for(;e;){this.steps.push(e),this.current&&(this.current.enabled=!1,this.current.busy=!0);try{e=yield e(this)}catch(t){if(t===s.back)this.steps.pop(),e=this.steps.pop();else if(t===s.resume)e=this.steps.pop();else{if(t!==s.cancel)throw t;e=void 0}}}this.current&&this.current.dispose()}))}showQuickPick({title:t,step:e,totalSteps:n,items:r,activeItem:c,placeholder:u,buttons:a,shouldResume:d}){return i(this,void 0,void 0,(function*(){const h=[];try{return yield new Promise(((l,p)=>{const v=o.window.createQuickPick();v.title=t,v.step=e,v.totalSteps=n,v.placeholder=u,v.items=r,c&&(v.activeItems=[c]),v.buttons=[...this.steps.length>1?[o.QuickInputButtons.Back]:[],...a||[]],h.push(v.onDidTriggerButton((t=>{t===o.QuickInputButtons.Back?p(s.back):l(t)})),v.onDidChangeSelection((t=>l(t[0]))),v.onDidHide((()=>{(()=>i(this,void 0,void 0,(function*(){p(d&&(yield d())?s.resume:s.cancel)})))().catch(p)}))),this.current&&this.current.dispose(),this.current=v,this.current.show()}))}finally{h.forEach((t=>t.dispose()))}}))}showInputBox({title:t,step:e,totalSteps:n,value:r,prompt:c,validate:u,buttons:a,shouldResume:d}){return i(this,void 0,void 0,(function*(){const h=[];try{return yield new Promise(((l,p)=>{const v=o.window.createInputBox();v.title=t,v.step=e,v.totalSteps=n,v.value=r||"",v.prompt=c,v.buttons=[...this.steps.length>1?[o.QuickInputButtons.Back]:[],...a||[]];let f=u("");h.push(v.onDidTriggerButton((t=>{t===o.QuickInputButtons.Back?p(s.back):l(t)})),v.onDidAccept((()=>i(this,void 0,void 0,(function*(){const t=v.value;(yield u(t))||l(t),v.enabled=!0,v.busy=!1})))),v.onDidChangeValue((t=>i(this,void 0,void 0,(function*(){const e=u(t);f=e;const n=yield e;e===f&&(v.validationMessage=n)})))),v.onDidHide((()=>{(()=>i(this,void 0,void 0,(function*(){p(d&&(yield d())?s.resume:s.cancel)})))().catch(p)}))),this.current&&this.current.dispose(),this.current=v,this.current.show()}))}finally{h.forEach((t=>t.dispose()))}}))}}},112:function(t,e,n){var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,s){function r(t){try{u(i.next(t))}catch(t){s(t)}}function c(t){try{u(i.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,c)}u((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.deactivate=e.activate=void 0;const o=n(549),s=n(191),r=n(439);e.activate=function(t){console.log('Congratulations, your extension "google-cloud-platform-ssh" is now active!'),t.subscriptions.push(o.commands.registerCommand("google-cloud-platform-ssh.main",(()=>i(this,void 0,void 0,(function*(){const e={Connect:r.Connect,ChangeSSHDirectory:s.ChangeSSHDirectory},n=o.window.createQuickPick();n.items=Object.keys(e).map((t=>({label:t}))),n.onDidChangeSelection((n=>{n[0]&&e[n[0].label](t).catch(console.error)})),n.onDidHide((()=>n.dispose())),n.show()})))))},e.deactivate=function(){}},549:t=>{t.exports=require("vscode")}},e={};return function n(i){if(e[i])return e[i].exports;var o=e[i]={exports:{}};return t[i].call(o.exports,o,o.exports,n),o.exports}(112)})();